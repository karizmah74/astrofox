<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>astrofox</title>
    <link rel="stylesheet" href="resources/css/reset.min.css" />
    <link rel="stylesheet" href="resources/css/fontello.css" />
    <link rel="stylesheet" href="build/app.css" />
    <link rel="stylesheet" href="build/sprite.css" />
    <script src="resources/js/libs/react.js"></script>
    <script src="build/app.js"></script>
    <script src="build/ui.js"></script>
</head>
<body>
<script>
var Node = {};

if (typeof process !== 'undefined' && typeof require !== 'undefined') {
    Node.GUI = require('nw.gui');
    Node.FS = require('fs');
    Node.Buffer = require('buffer').Buffer;
    Node.Stream = require('stream');
    Node.Spawn = require('child_process').spawn;

    process.on('uncaughtException', function(e) {
        console.log(e.stack);
    });

    // OSX
    if (process.platform === 'darwin') {
        var mb = new Node.GUI.Menu({ type: 'menubar' });
        mb.createMacBuiltin('AstroFox');
        Node.GUI.Window.get().menu = mb;
    }
}

document.addEventListener('DOMContentLoaded', function(e) {
    React.render(
        React.createElement(App, null),
        document.body
    );
});

window.onerror = function(msg, url, line, col, error) {
    // Note that col & error are new to the HTML 5 spec and may not be
    // supported in every browser.  It worked for me in Chrome.
    var extra = !col ? '' : '\ncolumn: ' + col;
    extra += !error ? '' : '\nerror: ' + error;

    // You can view the information in an alert to see things working like this:
    console.error("Error: " + msg + "\nurl: " + url + "\nline: " + line + extra + "\n");

    // TODO: Report this error via ajax so you can keep track
    //       of what pages have JS issues
    var suppressErrorAlert = true;

    // If you return true, then error alerts (like in older versions of
    // Internet Explorer) will be suppressed.
    return suppressErrorAlert;
};
</script>
</body>
</html>
